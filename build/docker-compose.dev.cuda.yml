# Docker compose configuration with desktop gpu support for ROS development
# Nvidia only, WSL + Linux

include:
  - docker-compose.carla.cuda.yaml

services:
  agent-dev:
    extends:
      file: docker-compose.dev.base.yml
      service: agent-dev
    build:
      args:
        PAF_USERNAME: ${PAF_USERNAME}
        PAF_UID: ${PAF_UID}
        PAF_GID: ${PAF_GID}
        BASE_FLAVOUR: cuda
    deploy:
      resources:
        reservations:
          devices:
            - driver: nvidia
              count: "all"
              capabilities: [gpu]
    # Uncomment below if you also have intel/amd integrated graphics (Laptop)
    # devices:
    #   - /dev/dri
