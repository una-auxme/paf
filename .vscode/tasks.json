{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "Check NVIDIA driver (>= 550)",
      "type": "shell",
      "command": "bash ${workspaceFolder}/scripts/check-nvidia.sh",
      "problemMatcher": [
        "$gcc"
      ],
      "runOptions": {
        "runOn": "folderOpen"
      },
      "detail": "Verifies that the host NVIDIA driver is >= 550 and surfaces a warning in Problems view if not."
    },
    {
      "label": "Update build/.env file",
      "type": "shell",
      "command": "bash ${workspaceFolder}/scripts/update-dotenv.sh",
      "problemMatcher": [
        "$gcc"
      ],
      "runOptions": {
        "runOn": "folderOpen"
      },
      "detail": "Sets the variables in build/.env based on the host system configuration."
    },
    {
      "label": "Run 'catkin_make' in docker container. Choose container from list of running containers.",
      "type": "shell",
      "command": "docker exec -it ${input:container_name} bash -c 'cd /catkin_ws && source /opt/ros/noetic/setup.bash && source devel/setup.bash && catkin_make'",
      "problemMatcher": [],
      "detail": "Executes 'catkin_make' selected container. Requires Tasks Shell Input Extension, in order to generate the list of containers.",
    },
    {
      "label": "Lint python code with ruff",
      "type": "shell",
      "command": "ruff check /workspace/code/",
      "problemMatcher": [],
      "detail": "Manually trigger the ruff linter to check the python files.",
    },
    {
      "label": "Lint python code with ruff and apply safe fixes",
      "type": "shell",
      "command": "ruff check /workspace/code/ --fix",
      "problemMatcher": [],
      "detail": "Manually trigger the ruff linter to check the python files and apply the safe fixes that it encounters during linting.",
    },
    {
      "label": "Check python code formatting with ruff",
      "type": "shell",
      "command": "ruff format /workspace/code/ --check",
      "problemMatcher": [],
      "detail": "Manually trigger the ruff formatter to check if the formatting of the python files is correct.",
    },
    {
      "label": "Format python code with ruff",
      "type": "shell",
      "command": "ruff format /workspace/code",
      "problemMatcher": [],
      "detail": "Manually trigger the ruff formatter to format the python files.",
    },
  ],
  "inputs": [
    {
      "id": "container_name",
      "type": "command",
      "command": "shellCommand.execute",
      "args": {
        "command": "docker ps --format '{{.Names}}'",
      }
    }
  ]
}
