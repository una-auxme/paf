# Traffic Light Improvement Approaches

**Summary:** This page explains possible approaches to further optimize and improve the traffic light (state) detection.

- [Vision Node](#vision-node)
  - [Increasing the camera resolution](#increasing-the-camera-resolution)
  - [Using a zoomed camera](#using-a-zoomed-camera)
  - [Calculation of the distance to a traffic light by image](#calculation-of-the-distance-to-a-traffic-light-by-image)
  - [Using a NN to detect the right traffic light](#using-a-nn-to-detect-the-right-traffic-light)

## Vision Node

### Increasing the camera resolution

The front facing camera currently resolves with 720p. This owed to the limited VRAM of the GPUs. But with enough, an increase to 1080p should be possible. This would lead to the vision recognition and classification model being able to "see" further.
Finally leading to an earlier traffic light recognition of course.

### Using a zoomed camera

By narrowing down the FOV of a camera configuration in the [dev_objects.json](../../../../code/agent/config/dev_objects.json) and [agent.py](../../../../code/agent/src/agent/agent.py) files, a highly usable camera is created. The small FOV angle let the camera only see a very limited cutout.
But this cutout still gets resolved with the specified resolution.
This makes it possible to have a high resolution sight into the distance.
The images generated by this camera can then be used to recognize objects, like traffic lights, earlier and with a higher precision and confidence. This enables the possibility to see the first traffic lights as far as up to 100 meters before the intersection.

If this solution gets implemented, it can be resonable to think about outsource the whole traffic light visual detection into a node of its own.
This would increase the encapsulation of functions and finally the readability and maintainability. It would also eqalize conflicts while working on the code.

### Calculation of the distance to a traffic light by image

If the size of the sensor is known, the distance could be calculated with [this approach](https://photo.stackexchange.com/questions/12434/how-do-i-calculate-the-distance-of-an-object-in-a-photo).

### Using a NN to detect the right traffic light

As of now, a pretty inflexible code is used to determine, if a traffic light is directed into our direction. This could be replaced by a neural network, which gets trained with images generated by the carla simulator itself.
When receiving an image, it would then decide if the image shows a facing or non-facing light.
